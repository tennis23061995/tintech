{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\home\\controller\\video.js"
    ],
    "names": [
        "indexAction",
        "keyword",
        "get",
        "categoryid",
        "model",
        "findOne",
        "id",
        "category",
        "findAll",
        "parentid",
        "lstparentmenu",
        "navList",
        "menu",
        "i",
        "length",
        "parseInt",
        "submenu",
        "submenusid",
        "j",
        "push",
        "parentmenu",
        "JSON",
        "parse",
        "submenus",
        "assign",
        "displayView",
        "getdatavideoAction",
        "post",
        "pagenumber",
        "pagesize",
        "console",
        "log",
        "map",
        "title",
        "ispublished",
        "categories",
        "item",
        "ids",
        "ca",
        "getPageVideoSelect",
        "itemList",
        "success",
        "total",
        "content"
    ],
    "mappings": "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",
    "file": "..\\..\\..\\src\\home\\controller\\video.js",
    "sourcesContent": [
        "'use strict';\r\n\r\nimport Base from './base.js';\r\n\r\nexport default class extends Base {\r\n  /**\r\n   * index action\r\n   * @return {Promise} []\r\n   */\r\n  async indexAction(){\r\n      // 搜索功能\r\n      let keyword=this.get('keyword');\r\n      let categoryid=this.get('category');\r\n      let category=await this.model(\"home\").findOne(\"item\",{id:categoryid});\r\n      var lstparentmenu=await this.model(\"home\").findAll('item',{parentid:['IN', [0]]});\r\n      var navList={menu:[]};\r\n      for (var i = 0; i < lstparentmenu.length; i++) {\r\n        var submenu=await this.model(\"home\").findAll('item',{parentid:['IN', [parseInt(lstparentmenu[i].id)]]});\r\n        var submenusid=[];\r\n        for (var j = 0; j < submenu.length; j++) {\r\n          submenusid.push(submenu[j].id);\r\n        }\r\n        navList.menu.push({parentmenu:JSON.parse(JSON.stringify(lstparentmenu[i])),submenus:JSON.parse(JSON.stringify(submenu)),submenusid:submenusid});\r\n      }\r\n      this.assign(\"navList\",navList);\r\n      this.assign(\"title\",\"全站搜索\");\r\n      this.assign(\"keyword\",keyword);\r\n        this.assign(\"category\",category);\r\n      return this.displayView(\"video_index\");\r\n  }\r\n\r\n  async getdatavideoAction(){\r\n      // 搜索功能\r\n      let keyword=await this.post('keyword');\r\n      let category=await this.post('category') || 0;\r\n      let pagenumber=await this.post(\"page\")||1;\r\n      let pagesize=this.post(\"pagesize\")||10;\r\n      console.log(category)\r\n      let map={title: [\"like\", \"%\"+keyword+\"%\"],ispublished:1}\r\n      if(category!=0)\r\n      {\r\n        var categories=await this.model(\"home\").findAll(\"item\",{parentid:category});\r\n        console.log(categories.length);\r\n        if(categories.length==0)map={title: [\"like\", \"%\"+keyword+\"%\"],ispublished:1,item:category};\r\n        else {\r\n          let ids = [category];\r\n          var ca=JSON.parse(JSON.stringify(categories));\r\n          console.log(JSON.parse(JSON.stringify(categories)))\r\n          for (var i=0;i<ca.length;i++ ) {\r\n              ids.push(ca[i].id);\r\n          }\r\n          map={title: [\"like\", \"%\"+keyword+\"%\"],ispublished:1,item: ['IN', ids]};\r\n        }\r\n      }\r\n      let itemList=await this.model(\"home\").getPageVideoSelect(map,pagenumber,pagesize);\r\n      if(itemList.length>0)\r\n      {\r\n        return this.success({total:itemList.length,content:JSON.parse(JSON.stringify(itemList))});\r\n      }\r\n      else\r\n      {\r\n        return this.success({total:0,content:{}});\r\n      }\r\n  }\r\n}\r\n"
    ]
}