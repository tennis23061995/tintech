$(function(){var e=function(e){$("#loginBtn").click(function(a){var t=e.getValidate();t||($("#notice").addClass("show").removeClass("hide"),setTimeout(function(){$("#notice").addClass("hide").removeClass("show")},2e3),a.preventDefault()),t||($("#captcha").append('<small class="help-block alert alert-danger checkright">请先拖动验证码到相应位置！</small>'),setTimeout(function(){$("#captcha").find(".alert-danger").remove()},2e3),a.preventDefault())}),e.appendTo("#captcha"),e.onReady(function(){$("#wait")[0].className="hide"}),e.onSuccess(function(){var a=e.getValidate();$("#challenge").val(a.geetest_challenge),$("#seccode").val(a.geetest_seccode),$("#validate").val(a.geetest_validate)})};$.ajax({url:"/home/register/geetest?t="+(new Date).getTime(),data:{__CSRF__:G_csrf},type:"get",dataType:"json",success:function(a){initGeetest({gt:a.gt,challenge:a.challenge,product:"float",offline:!a.success},e)}})}),$(function(){$("#loginBtn").on("click",function(){var e={username:$("#username").val(),password:$("#password").val(),geetest_challenge:$("#challenge").val(),geetest_seccode:$("#seccode").val(),geetest_validate:$("#validate").val(),__CSRF__:G_csrf};$.ajax({url:"/home/admin/dologin",data:e,type:"POST",success:function(e){1===e.status?(alert(e.msg),window.location.href="/admin/index"):alert(e.msg)}})})}),$(document).keyup(function(e){13==e.keyCode&&$("#loginBtn").trigger("click")});