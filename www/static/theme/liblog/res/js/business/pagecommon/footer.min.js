$(window).scroll(function(){0!=$(this).scrollTop()?$("#back-top").fadeIn():$("#back-top").fadeOut()}),$.ajax({url:"https://api.github.com/repos/livisky/liblog",type:"GET",success:function(t){t&&$("#gitcount").html(t.stargazers_count)}}),$("#back-top").on("click",function(){$("html,body").animate({scrollTop:"0"})}),$(".search-show").on("click",function(){$(".site-search").toggleClass("active"),$(this).find(".fa-search").toggleClass("fa-remove")}),$(".collect_btn").bind("click",function(){var t=$(this),e=window.location.pathname,a={url:e,title:$("#article-title").html(),author:$("#loginname").val(),flag:t.attr("flag"),cid:t.attr("cid"),createtime:new Date,type:t.attr("itype"),aid:t.attr("aid"),__CSRF__:G_csrf};$.ajax({url:"/personal/index/savecollect",data:a,type:"POST",success:function(e){0===e.errno?0===e.data.status?(t.attr("cid",""),t.removeClass("cancel"),t.val("收藏")):1===e.data.status&&(t.attr("cid",e.data.cid),t.addClass("cancel"),t.val("取消收藏")):alert(e.errmsg)}})}),$("#nav-tabs").delegate("li","click",function(){var t=$(this),e=t.attr("pid");$("#nav-tabs").find("li").removeClass("active"),$(".tab-pane").removeClass("active"),$(".tab-pane").hide(),t.addClass("active"),$("#"+e).show()}),$("#userInfo").on("mouseover",function(){$("#userMenu").show()}),$("#userInfo").on("mouseout",function(){$("#userMenu").hide()}),window.onload=function(){var t=document.getElementById("tb");if(t)for(var e=document.getElementById("tb").getElementsByTagName("li"),a=document.getElementById("tb-main").getElementsByTagName("div"),n=0;n<e.length;n++)e[n].index=n,e[n].onmouseover=function(){for(var t=0;t<e.length;t++)e[t].className="";this.className="cur";for(var t=0;t<a.length;t++)a[t].style.display="none";a[this.index].style.display="block"}};
(function(){var t;t=function(){function t(t,i){this.startInterval=6e4,this.init(t,i)}return t.prototype.init=function(t,i){return this.$element=$(t),this.options=$.extend({},$.fn.timeago.defaults,i),this.updateTime(),this.startTimer()},t.prototype.startTimer=function(){var t;return t=this,this.interval=setInterval(function(){return t.refresh()},this.startInterval)},t.prototype.stopTimer=function(){return clearInterval(this.interval)},t.prototype.restartTimer=function(){return this.stopTimer(),this.startTimer()},t.prototype.refresh=function(){return this.updateTime(),this.updateInterval()},t.prototype.updateTime=function(){var t;return t=this,this.$element.findAndSelf(this.options.selector).each(function(){var i;return i=t.timeAgoInWords($(this).attr(t.options.attr)),$(this).html(i)})},t.prototype.updateInterval=function(){var t,i,e,n;if(this.$element.findAndSelf(this.options.selector).length>0){if("up"===this.options.dir?t=":first":"down"===this.options.dir&&(t=":last"),n=this.$element.findAndSelf(this.options.selector).filter(t).attr(this.options.attr),i=this.parse(n),e=this.getTimeDistanceInMinutes(i),e>=0&&44>=e&&6e4!==this.startInterval)return this.startInterval=6e4,this.restartTimer();if(e>=45&&89>=e&&132e4!==this.startInterval)return this.startInterval=132e4,this.restartTimer();if(e>=90&&2519>=e&&18e5!==this.startInterval)return this.startInterval=18e5,this.restartTimer();if(e>=2520&&432e5!==this.startInterval)return this.startInterval=432e5,this.restartTimer()}},t.prototype.timeAgoInWords=function(t){var i;return i=this.parse(t),""+this.options.lang.prefixes.ago+this.distanceOfTimeInWords(i)+this.options.lang.suffix},t.prototype.parse=function(t){var i;return i=$.trim(t),i=i.replace(/\.\d\d\d+/,""),i=i.replace(/-/,"/").replace(/-/,"/"),i=i.replace(/T/," ").replace(/Z/," UTC"),i=i.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(i)},t.prototype.getTimeDistanceInMinutes=function(t){var i;return i=(new Date).getTime()-t.getTime(),Math.round(Math.abs(i)/1e3/60)},t.prototype.distanceOfTimeInWords=function(t){var i;return i=this.getTimeDistanceInMinutes(t),0===i?""+this.options.lang.prefixes.lt+" "+this.options.lang.units.minute:1===i?"1 "+this.options.lang.units.minute:i>=2&&44>=i?""+i+" "+this.options.lang.units.minutes:i>=45&&89>=i?""+this.options.lang.prefixes.about+" 1 "+this.options.lang.units.hour:i>=90&&1439>=i?""+this.options.lang.prefixes.about+" "+Math.round(i/60)+" "+this.options.lang.units.hours:i>=1440&&2519>=i?"1 "+this.options.lang.units.day:i>=2520&&43199>=i?""+Math.round(i/1440)+" "+this.options.lang.units.days:i>=43200&&86399>=i?""+this.options.lang.prefixes.about+" 1 "+this.options.lang.units.month:i>=86400&&525599>=i?""+Math.round(i/43200)+" "+this.options.lang.units.months:i>=525600&&655199>=i?""+this.options.lang.prefixes.about+" 1 "+this.options.lang.units.year:i>=655200&&914399>=i?""+this.options.lang.prefixes.over+" 1 "+this.options.lang.units.year:i>=914400&&1051199>=i?""+this.options.lang.prefixes.almost+" 2 "+this.options.lang.units.years:""+this.options.lang.prefixes.about+" "+Math.round(i/525600)+" "+this.options.lang.units.years},t}(),$.fn.timeago=function(i){return null==i&&(i={}),this.each(function(){var e,n;return e=$(this),n=e.data("timeago"),n?"string"==typeof i?n[i]():void 0:e.data("timeago",new t(this,i))})},$.fn.findAndSelf=function(t){return this.find(t).add(this.filter(t))},$.fn.timeago.Constructor=t,$.fn.timeago.defaults={selector:"time.timeago",attr:"datetime",dir:"up",lang:{units:{second:"second",seconds:"seconds",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",day:"day",days:"days",month:"month",months:"months",year:"year",years:"years"},prefixes:{lt:"less than a",about:"about",over:"over",almost:"almost",ago:""},suffix:" ago"}}}).call(this);
(function(){$.fn.timeago.defaults.lang={units:{second:"秒",seconds:"秒",minute:"分钟",minutes:"分钟",hour:"小时",hours:"小时",day:"天",days:"天",month:"月",months:"月",year:"年",years:"年"},prefixes:{lt:"不到 1",about:"约",over:"超过",almost:"接近",ago:""},suffix:"前"}}).call(this);